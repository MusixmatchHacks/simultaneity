!function(){"use strict";function a(a,b){var c=[];return c.push(a),c.push(b),i(c)}function b(b){g.selectAll("circle").data(b).enter().append("circle").classed("location",!0).attr("r","5px").each(function(b){var c=a(b[5],b[6]);d3.select(this).attr("cx",c[0]),d3.select(this).attr("cy",c[1])})}function c(a){return $.getJSON(a)}function d(a){console.log("Loading new data"),c(a).then(function(a){b(a),console.log("loaded new data")})}var e=window.innerWidth,f=window.innerHeight,g=d3.select("#labels").attr("width",e).attr("height",f),h=d3.select("#world").attr("width",e).attr("height",f),i=d3.geo.equirectangular().scale(e/5.7).translate([e/2,f/2]).precision(.1),j=d3.geo.path().projection(i);d3.json("../scripts/world.json",function(a,b){if(a)throw a;h.insert("path",".graticule").datum(topojson.feature(b,b.objects.land)).attr("class","land").attr("d",j)}),d3.select(self.frameElement).style("height",f+"px");var k="http://ec2-54-147-191-254.compute-1.amazonaws.com/view_relayer_dummy/get_views?callback=?";setInterval(function(){d(k)},2e3)}();